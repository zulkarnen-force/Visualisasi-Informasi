<%- include('../layouts/header.ejs')  %> 


<div class="container">
    <div class="row text-center my-4 justify-content-center">

        <div class="col-sm-6">

            <form action="/weather" method="GET" id="form-filter" onchange="submit()">
                <select id="city" name="id" class="form-select form-select-sm my-3">
                    <option value="501186">Choose a City</option>
                    <% areas.forEach(area => { %>
                        <option value="<%= area.id %>"><%= area.kota %></option>
                        <% }) %>
                    </select>
            </form>
            
        </div>
    </div>
</div>


<% if (config !== undefined) { %>
    <div>
        <canvas id="myChart"></canvas>
    </div> 
<% } %>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>

    function a() {
        console.log(this)
    }

    document.addEventListener("DOMContentLoaded", function ()  {
        const chart = document.querySelector('#myChart');
        const formFilter = document.querySelector('#form-filter');
        const config = '<%- JSON.stringify(config) %>' 
        
        const myChart = new Chart(
        document.getElementById('myChart'),
         JSON.parse(config)
        );


    })
    
</script>


<%- include('../layouts/footer.ejs')  %> 